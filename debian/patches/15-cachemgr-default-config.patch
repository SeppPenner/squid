Author: Luigi Gangitano <luigi@debian.org>
Description: Fix path for cachemgr.cgi default configuration file
--- a/tools/Makefile.am
+++ b/tools/Makefile.am
@@ -57,7 +57,7 @@ EXTRA_DIST += helper-ok-dying.pl helper-ok.pl
 
 ## ##### cachemgr.cgi  #####
 
-DEFAULT_CACHEMGR_CONFIG = $(sysconfdir)/cachemgr.conf
+DEFAULT_CACHEMGR_CONFIG = /etc/squid/cachemgr.conf
 
 libexec_PROGRAMS = cachemgr$(CGIEXT)
 
@@ -80,6 +80,7 @@ cachemgr.cgi.8: $(srcdir)/cachemgr.cgi.8.in Makefile
 ## Shared
 
 install-data-local:
+	test -z "/etc/squid" || $(MKDIR_P) "$(DESTDIR)/etc/squid"
 	$(INSTALL_DATA) $(srcdir)/cachemgr.conf $(DESTDIR)$(DEFAULT_CACHEMGR_CONFIG).default
 	@if test -f $(DESTDIR)$(DEFAULT_CACHEMGR_CONFIG) ; then \
 	        echo "$@ will not overwrite existing $(DESTDIR)$(DEFAULT_CACHEMGR_CONFIG)" ; \
--- a/tools/Makefile.in
+++ b/tools/Makefile.in
@@ -752,7 +752,7 @@ SUBSTITUTE = sed "\
 # Neither of these should be disted from here.
 TESTSOURCES = test_tools.cc
 libexec_SCRIPTS = helper-mux.pl
-DEFAULT_CACHEMGR_CONFIG = $(sysconfdir)/cachemgr.conf
+DEFAULT_CACHEMGR_CONFIG = /etc/squid/cachemgr.conf
 cachemgr__CGIEXT__SOURCES = cachemgr.cc \
 	stub_debug.cc \
 	test_tools.cc \
@@ -1498,6 +1498,7 @@ cachemgr.cgi.8: $(srcdir)/cachemgr.cgi.8.in Makefile
 	$(SUBSTITUTE) < $(srcdir)/cachemgr.cgi.8.in > $@
 
 install-data-local:
+	test -z "/etc/squid" || $(MKDIR_P) "$(DESTDIR)/etc/squid"
 	$(INSTALL_DATA) $(srcdir)/cachemgr.conf $(DESTDIR)$(DEFAULT_CACHEMGR_CONFIG).default
 	@if test -f $(DESTDIR)$(DEFAULT_CACHEMGR_CONFIG) ; then \
 	        echo "$@ will not overwrite existing $(DESTDIR)$(DEFAULT_CACHEMGR_CONFIG)" ; \
